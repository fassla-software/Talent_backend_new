import{p as I,s as O,v as T,o as m,c as _,a as e,u as d,t as s,l as C,F as D,r as U,_ as z,y as L,J as X,e as x,i as W,q as B,A as w,B as G,n as j,b as f,k as Y,d as K,O as Q,M as Z,f as ee,w as A,P as te,H as M,T as se}from"./app-p80MXNvq.js";import{_ as ae,a as oe}from"./CheckoutShippingAddress-v7YkGuzz.js";import{r as ne}from"./TrashIcon-CdNOkzC4.js";import{r as le}from"./HomeIcon-B7lSqPJT.js";import"./AddressForm-BdEcL117.js";import"./AddressFormModal-C4SJpRgb.js";const re={class:"space-y-4 mt-3 transition duration-300"},ie={class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},de={key:0,class:"text-slate-950 text-base font-medium leading-normal"},ce={class:"space-y-2 divide-y divide-slate-200"},ue={class:"w-[72px] h-[95px]"},me=["src"],pe={class:"flex flex-col gap-1 w-full"},he={class:"text-primary text-xs font-normal leading-none"},_e={class:"text-slate-950 text-base font-normal leading-normal"},ve={class:"flex flex-wrap justify-between items-center gap-3"},fe={class:"flex items-center gap-1"},ye={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},xe={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},be={class:"text-slate-800 text-base font-normal leading-normal"},ge={__name:"BuyNowCheckoutProduct",setup(P){I();const b=O(),a=T();return(y,g)=>{var r,c;return m(),_("div",re,[e("div",ie,[d(b).multiVendor?(m(),_("div",de,s((r=d(a).buyNowProduct)==null?void 0:r.shop_name),1)):C("",!0),e("div",ce,[(m(!0),_(D,null,U((c=d(a).buyNowProduct)==null?void 0:c.products,t=>{var p,n;return m(),_("div",{key:t.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",ue,[e("img",{src:t.thumbnail,class:"w-full h-full object-contain"},null,8,me)]),e("div",pe,[e("div",he,s(t==null?void 0:t.brand),1),e("div",_e,s(t==null?void 0:t.name),1),e("div",ve,[e("div",fe,[e("div",ye,s((p=t==null?void 0:t.size)==null?void 0:p.name),1),e("div",xe,s((n=t==null?void 0:t.color)==null?void 0:n.name),1)]),e("div",be," 1 X "+s(d(b).showCurrency((t==null?void 0:t.discount_price)>0?t==null?void 0:t.discount_price:t==null?void 0:t.price)),1)])])])}),128))])])])}}},we={class:"p-6 bg-white rounded-2xl border border-slate-200"},$e={class:"text-slate-950 text-xl font-medium leading-7"},ke={class:"my-4 flex justify-between gap-4"},Ce={class:"text-slate-950 text-base font-normal leading-normal"},Pe={class:"text-slate-950 text-base font-normal leading-normal"},Se={class:"my-4 flex justify-between gap-4"},Ne={class:"text-red-500 text-base font-normal leading-normal"},Me={class:"text-slate-950 text-base font-normal leading-normal"},Be={class:"my-4 flex justify-between gap-4"},je={class:"text-slate-950 text-base font-normal leading-normal"},Ie={class:"text-slate-950 text-base font-normal leading-normal"},Oe={class:"my-4 flex justify-between gap-4"},Te={class:"text-slate-950 text-base font-normal leading-normal"},Ve={class:"text-slate-950 text-base font-normal leading-normal"},Ae={class:"my-4 flex justify-between gap-4"},De={class:"text-slate-950 text-base font-normal leading-normal"},Ue={class:"text-slate-950 text-base font-normal leading-normal"},ze={class:"my-4 flex justify-between gap-4"},Le={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},We={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Ge={class:"p-4 mt-6 bg-slate-100 rounded-xl"},He={class:"text-black text-base font-normal leading-normal"},Fe={class:"relative mt-2"},Re=["placeholder"],Ee={class:"absolute top-1/2 -translate-y-1/2 left-3"},qe={__name:"BuyNowCheckoutOrderSummary",props:{note:String,paymentMethod:String},setup(P){const b=new L,a=T(),y=O(),g=I(),r=X(),c=x(!1),t=x(""),p=P,n=x({total_amount:0,delivery_charge:0,coupon_discount:0,payable_amount:0,order_tax_amount:0});W(()=>{t.value=a.coupon_code,a.isLoadingCart||i()}),B(()=>a.isLoadingCart,()=>{a.isLoadingCart||i()});const i=()=>{axios.post("/cart/checkout",{shop_ids:[a.buyNowShopId],is_buy_now:!0,coupon_code:t.value},{headers:{Authorization:g.token}}).then(o=>{n.value=o.data.data.checkout,a.buyNowProduct=o.data.data.checkout_items[0],c.value=o.data.data.apply_coupon,c.value&&t.value.length>0?(r.success(o.data.message,{position:"bottom-left"}),a.coupon_code=t.value):!c.value&&t.value.length>0&&(r.error(o.data.message,{position:"bottom-left"}),a.coupon_code="")}).catch(o=>{r.error(o.response.data.message,{position:"bottom-left"})})},l=()=>{t.value.length>0&&i()},S=()=>{t.value="",c.value=!1,a.coupon_code="",i()},u={component:Z,props:{title:"Order Placed",message:"Your order has been placed successfully."}},N=()=>{if(!a.address){r.error("Please select shipping address");return}if(p.paymentMethod==null){r.error("Please select payment method",{position:"bottom-left"});return}a.buyNowProduct?axios.post("/place-order",{shop_ids:[a.buyNowShopId],address_id:a.address.id,payment_method:p.paymentMethod,coupon_code:t.value,note:p.note,is_buy_now:!0},{headers:{Authorization:g.token}}).then(o=>{r(u,{type:"default",hideProgressBar:!0,icon:!1,position:"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),n.value.total_amount=0,n.value.delivery_charge=0,n.value.coupon_discount=0,n.value.payable_amount=0,a.buyNowProduct=null,a.coupon_code="";let h=o.data.data.order_payment_url;if(h!=null){H(h);return}else a.showOrderConfirmModal=!0}).catch(()=>{}):r.error("Please select at least one product",{position:"bottom-left"})},H=o=>{let h=700,$=700,F=screen.width/2-h/2,R=screen.height/2-$/2,E="popup,resizable,height="+$+",width="+h+",top="+R+",left="+F,v=window.open(o,null,E);v.title="Payment Window Screen - Make Payment",v.onload=()=>{v.title="Payment Window Screen - Make Payment"},v.focus();var k=setInterval(q,1e3);function q(){try{if(v.closed||!v){clearInterval(k),v.close(),a.orderPaymentCancelModal=!0,r.error("Payment Canceled",{position:"bottom-left"}),b.push({name:"home"});return}var V=v.location.pathname.replace(/\/order\/\d+/,"");if(V=="/payment/cancel"){clearInterval(k),setTimeout(()=>{v.close(),a.orderPaymentCancelModal=!0,r.error("Sorry! Payment Canceled",{position:"bottom-left"}),b.push({name:"home"})},8e3);return}if(V=="/payment/success"){v.close(),clearInterval(k),a.showOrderConfirmModal=!0;return}}catch{}}setTimeout(()=>{clearInterval(k),v.close()},18e4)};return(o,h)=>(m(),_("div",null,[e("div",we,[e("div",$e,s(o.$t("Order Summary")),1),e("div",ke,[e("div",Ce,s(o.$t("Subtotal")),1),e("div",Pe,s(d(y).showCurrency(n.value.total_amount)),1)]),e("div",Se,[e("div",Ne,s(o.$t("Discount")),1),e("div",Me," -"+s(d(y).showCurrency(n.value.coupon_discount)),1)]),h[1]||(h[1]=e("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),e("div",Be,[e("div",je,s(o.$t("Subtotal After Discount")),1),e("div",Ie,s(d(y).showCurrency((n.value.total_amount-n.value.coupon_discount).toFixed(2))),1)]),e("div",Oe,[e("div",Te,s(o.$t("Shipping Charge")),1),e("div",Ve,s(d(y).showCurrency(n.value.delivery_charge)),1)]),e("div",Ae,[e("div",De,s(o.$t("Vat & Tax")),1),e("div",Ue,s(d(y).showCurrency(n.value.order_tax_amount)),1)]),h[2]||(h[2]=e("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),e("div",ze,[e("div",Le,s(o.$t("Total Payable")),1),e("div",We,s(d(y).showCurrency(n.value.payable_amount)),1)]),e("div",Ge,[e("div",He,s(o.$t("Have a coupon"))+"? ",1),e("div",Fe,[w(e("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=$=>t.value=$),class:j(["formInputCoupon pr-14 p-3",c.value?"text-green-500 pl-10":""]),placeholder:o.$t("Enter coupon code")},null,10,Re),[[G,t.value]]),c.value?(m(),_("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:S},[f(d(ne),{class:"w-6 h-6 text-red-500"})])):(m(),_("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:l},[f(d(Y),{class:"w-6 h-6 text-white"})])),e("span",Ee,[c.value?(m(),K(d(Q),{key:0,class:"w-6 h-6 text-green-500"})):C("",!0)])])])]),e("button",{class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:N},s(o.$t("Place Order")),1),f(ae)]))}},Je=z(qe,[["__scopeId","data-v-9a106e29"]]),Xe={class:"main-container"},Ye={class:"flex items-center gap-2 overflow-hidden pt-4"},Ke={class:"grow w-full overflow-hidden"},Qe={class:"space-x-1 text-slate-600 text-sm font-normal truncate"},Ze={class:"grid grid-cols-1 xl:grid-cols-3 my-3 gap-8"},et={class:"col-span-1 xl:col-span-2"},tt={class:"flex gap-2 justify-between items-center"},st={class:"text-slate-950 text-lg sm:text-3xl font-medium leading-10"},at={class:"text-primary-600 text-lg font-medium leading-normal tracking-tight"},ot={key:0},nt={class:"mt-6"},lt={class:"mb-1"},rt={class:"text-slate-950 text-xl font-medium leading-7"},it={class:"text-slate-500 text-lg font-normal leading-7 tracking-tight"},dt=["placeholder"],ct={class:"p-6 mt-4 bg-white rounded-2xl border border-slate-200"},ut={class:"text-slate-950 text-xl font-medium leading-7"},mt={class:"mt-4 flex flex-wrap gap-4"},pt={for:"cash",class:"flex items-center gap-4 xl:min-w-80"},ht={class:"text-slate-500 text-base font-normal leading-normal"},_t={for:"card",class:"flex items-center gap-4 xl:min-w-80"},vt={class:"text-slate-500 text-base font-normal leading-normal"},ft={key:0,class:"mt-5 border-t border-slate-200"},yt={class:"text-slate-600 pt-2 block text-md font-medium leading-7"},xt={class:"mt-3 flex flex-wrap gap-4"},bt=["for"],gt=["id","value"],wt={class:""},$t=["src"],kt={__name:"BuyNow",setup(P){const b=new L,a=I(),y=O(),g=T(),r=x(!0),c=x(""),t=x("cash"),p=x(null),n=x(null);return W(()=>{window.scrollTo(0,0),g.coupon_code="",p.value=t.value,a.user||b.push({name:"home"})}),B(t,()=>{t.value==="card"?p.value=n.value:p.value=t.value}),B(n,()=>{t.value==="card"&&(p.value=n.value)}),(i,l)=>{const S=ee("router-link");return m(),_("div",Xe,[e("div",Ye,[f(S,{to:"/",class:"w-6 h-6"},{default:A(()=>[f(d(le),{class:"w-5 h-5 text-slate-600"})]),_:1}),e("div",Ke,[e("div",Qe,[e("span",null,s(i.$t("Home")),1),l[5]||(l[5]=e("span",null,"/",-1)),e("span",null,s(i.$t("Cart")),1),l[6]||(l[6]=e("span",null,"/",-1)),e("span",null,s(i.$t("Checkout")),1)])])]),e("div",Ze,[e("div",et,[e("div",{class:j(["py-4 border-b tran",r.value?"border-primary":"border-slate-200"])},[e("div",tt,[e("div",st,s(i.$t("Checkout")),1),e("div",{class:"flex items-center gap-2 cursor-pointer",onClick:l[0]||(l[0]=u=>r.value=!r.value)},[e("div",at," ("+s(d(g).buyNowProduct?1:0)+" "+s(i.$t("items"))+") ",1),f(d(te),{class:j(["w-5 h-5 text-primary-600 transition duration-300",r.value?"rotate-180":""])},null,8,["class"])])]),r.value?(m(),_("div",ot,[f(ge)])):C("",!0)],2),f(oe),e("div",nt,[e("div",lt,[e("span",rt,s(i.$t("Note")),1),e("span",it," ("+s(i.$t("Optional"))+") ",1)]),w(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=u=>c.value=u),rows:"3",class:"form-input",placeholder:i.$t("Write your note here")+"..."},null,8,dt),[[G,c.value]])]),e("div",ct,[e("div",ut,s(i.$t("Payment Method")),1),e("div",mt,[e("label",pt,[w(e("input",{"onUpdate:modelValue":l[2]||(l[2]=u=>t.value=u),id:"cash",name:"payment",type:"radio",class:"radioBtn2",value:"cash",checked:""},null,512),[[M,t.value]]),l[7]||(l[7]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/money-2.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",ht,s(i.$t("Cash on delivery")),1)]),e("label",_t,[w(e("input",{"onUpdate:modelValue":l[3]||(l[3]=u=>t.value=u),id:"card",name:"payment",type:"radio",class:"radioBtn2",value:"card"},null,512),[[M,t.value]]),l[8]||(l[8]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/card.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",vt,s(i.$t("Credit or Debit Card")),1)])]),f(se,{"leave-active-class":"transition ease-in duration-300","enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:A(()=>[t.value==="card"?(m(),_("div",ft,[e("span",yt,s(i.$t("Available Payment Gateways")),1),e("div",xt,[(m(!0),_(D,null,U(d(y).paymentGateways,u=>(m(),_("label",{key:u.id,for:u.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer"},[w(e("input",{"onUpdate:modelValue":l[4]||(l[4]=N=>n.value=N),id:u.name,name:"paymentGateway",type:"radio",class:"sr-only",value:u.name},null,8,gt),[[M,n.value]]),e("div",wt,[e("img",{src:u.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,$t)])],8,bt))),128))])])):C("",!0)]),_:1})])]),f(Je,{note:c.value,paymentMethod:p.value},null,8,["note","paymentMethod"])])])}}},jt=z(kt,[["__scopeId","data-v-f7f077ab"]]);export{jt as default};
