import{p as O,s as B,v as V,o as u,c as p,F as I,r as j,a as e,t as s,u as n,_ as N,y as W,J,e as g,i as G,A as w,B as H,n as A,b as f,k as X,d as Y,O as K,l as T,M as Q,q as D,f as Z,w as z,P as ee,H as S,T as te}from"./app-p80MXNvq.js";import{_ as se,a as oe}from"./CheckoutShippingAddress-v7YkGuzz.js";import{r as ae}from"./TrashIcon-CdNOkzC4.js";import{r as ne}from"./HomeIcon-B7lSqPJT.js";import"./AddressForm-BdEcL117.js";import"./AddressFormModal-C4SJpRgb.js";const le={class:"space-y-4 mt-3 transition duration-300"},re={class:"text-slate-950 text-base font-medium leading-normal"},ie={class:"space-y-2 divide-y divide-slate-200"},de={class:"w-[72px] h-[95px]"},ce=["src"],ue={class:"flex flex-col gap-1 w-full"},me={class:"text-primary text-xs font-normal leading-none"},pe={class:"text-slate-950 text-base font-normal leading-normal"},he={class:"flex flex-wrap justify-between items-center gap-3"},_e={class:"flex items-center gap-1"},fe={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},ve={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},ye={class:"text-slate-800 text-base font-normal leading-normal"},xe={__name:"checkoutProducts",setup(P){O();const v=B(),t=V();return(y,b)=>(u(),p("div",le,[(u(!0),p(I,null,j(n(t).checkoutProducts,r=>(u(),p("div",{key:r.shop_id,class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},[e("div",re,s(r.shop_name),1),e("div",ie,[(u(!0),p(I,null,j(r.products,l=>{var a,h;return u(),p("div",{key:l.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",de,[e("img",{src:l.thumbnail,class:"w-full h-full object-contain"},null,8,ce)]),e("div",ue,[e("div",me,s(l.brand),1),e("div",pe,s(l.name),1),e("div",he,[e("div",_e,[e("div",fe,s((a=l.size)==null?void 0:a.name),1),e("div",ve,s((h=l.color)==null?void 0:h.name),1)]),e("div",ye,s(l.quantity)+" X "+s(n(v).showCurrency(l.discount_price>0?l.discount_price:l.price)),1)])])])}),128))])]))),128))]))}},ge={class:"p-6 bg-white rounded-2xl border border-slate-200"},be={class:"text-slate-950 text-xl font-medium leading-7"},we={class:"my-4 flex justify-between gap-4"},$e={class:"text-slate-950 text-base font-normal leading-normal"},ke={class:"text-slate-950 text-base font-normal leading-normal"},Ce={class:"my-4 flex justify-between gap-4"},Pe={class:"text-red-500 text-base font-normal leading-normal"},Me={class:"text-slate-950 text-base font-normal leading-normal"},Se={class:"my-4 flex justify-between gap-4"},Ie={class:"text-slate-950 text-base font-normal leading-normal"},je={class:"text-slate-950 text-base font-normal leading-normal"},Ae={class:"my-4 flex justify-between gap-4"},Te={class:"text-slate-950 text-base font-normal leading-normal"},Oe={class:"text-slate-950 text-base font-normal leading-normal"},Be={class:"my-4 flex justify-between gap-4"},Ve={class:"text-slate-950 text-base font-normal leading-normal"},Ue={class:"text-slate-950 text-base font-normal leading-normal"},De={class:"my-4 flex justify-between gap-4"},ze={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Ne={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},We={class:"p-4 mt-6 bg-slate-100 rounded-xl"},Ge={class:"text-black text-base font-normal leading-normal"},He={class:"relative mt-2"},Fe=["placeholder"],Re={class:"absolute top-1/2 -translate-y-1/2 left-3"},qe={__name:"CheckoutOrderSummary",props:{note:String,paymentMethod:String},setup(P){const v=new W,t=V(),y=B(),b=O(),r=J(),l=g(!1),a=g(""),h=P;G(()=>{a.value=t.coupon_code});const x=()=>{a.value.length>0&&$()},d=()=>{a.value="",l.value=!1,t.coupon_code="",$()},i={component:Q,props:{title:"Order Placed",message:"Your order has been placed successfully."}},M=()=>{if(!t.address){r.error("Please select shipping address",{position:"bottom-left"});return}if(h.paymentMethod==null){r.error("Please select payment method",{position:"bottom-left"});return}t.checkoutProducts.length>0?axios.post("/place-order",{shop_ids:t.selectedShopIds,address_id:t.address.id,payment_method:h.paymentMethod,coupon_code:a.value,note:h.note},{headers:{Authorization:b.token}}).then(o=>{t.checkoutProducts=[],t.selectedShopIds=[],t.coupon_code="",t.total_amount=0,t.delivery_charge=0,t.coupon_discount=0,t.payable_amount=0,t.fetchCart(),r(i,{type:"default",hideProgressBar:!0,icon:!1,position:"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3});let _=o.data.data.order_payment_url;if(_!=null){c(_);return}else t.showOrderConfirmModal=!0}).catch(()=>{}):r.error("Please select at least one product",{position:"bottom-left"})},c=o=>{let _=700,k=700,F=screen.width/2-_/2,R=screen.height/2-k/2,q="popup,resizable,height="+k+",width="+_+",top="+R+",left="+F,m=window.open(o,null,q);if(m.title="Payment Window Screen - Make Payment",m.onload=()=>{m.title="Payment Window Screen - Make Payment",m.closed&&console.log("close window")},m.focus(),m.closed){r.error("Payment Canceled",{position:"bottom-left"}),v.push({name:"home"});return}var C=setInterval(E,1e3);function E(){try{if(m.closed||!m){clearInterval(C),m.close(),t.orderPaymentCancelModal=!0,r.error("Payment Canceled",{position:"bottom-left"}),v.push({name:"home"});return}var U=m.location.pathname.replace(/\/order\/\d+/,"");if(U=="/payment/cancel"){clearInterval(C),setTimeout(()=>{m.close(),t.orderPaymentCancelModal=!0,r.error("Payment Canceled",{position:"bottom-left"}),v.push({name:"home"})},8e3);return}if(U=="/payment/success"){m.close(),clearInterval(C),t.showOrderConfirmModal=!0;return}}catch{}}setTimeout(()=>{clearInterval(C),m.close()},18e4)},$=()=>{axios.post("/cart/checkout",{shop_ids:t.selectedShopIds,coupon_code:a.value},{headers:{Authorization:b.token}}).then(o=>{l.value=o.data.data.apply_coupon,t.total_amount=o.data.data.checkout.total_amount,t.delivery_charge=o.data.data.checkout.delivery_charge,t.coupon_discount=o.data.data.checkout.coupon_discount,t.payable_amount=o.data.data.checkout.payable_amount,l.value?(r.success(o.data.message,{position:"bottom-left"}),t.coupon_code=a.value):(r.error(o.data.message,{position:"bottom-left"}),t.coupon_code="")}).catch(o=>{r.error(o.response.data.message,{position:"bottom-left"})})};return(o,_)=>(u(),p("div",null,[e("div",ge,[e("div",be,s(o.$t("Order Summary")),1),e("div",we,[e("div",$e,s(o.$t("Subtotal")),1),e("div",ke,s(n(y).showCurrency(n(t).total_amount)),1)]),e("div",Ce,[e("div",Pe,s(o.$t("Discount")),1),e("div",Me," -"+s(n(y).showCurrency(n(t).coupon_discount)),1)]),_[1]||(_[1]=e("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),e("div",Se,[e("div",Ie,s(o.$t("Subtotal After Discount")),1),e("div",je,s(n(y).showCurrency((n(t).total_amount-n(t).coupon_discount).toFixed(2))),1)]),e("div",Ae,[e("div",Te,s(o.$t("Shipping Charge")),1),e("div",Oe,s(n(y).showCurrency(n(t).delivery_charge)),1)]),e("div",Be,[e("div",Ve,s(o.$t("Vat & Tax")),1),e("div",Ue,s(n(y).showCurrency(n(t).order_tax_amount)),1)]),_[2]||(_[2]=e("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),e("div",De,[e("div",ze,s(o.$t("Total Payable")),1),e("div",Ne,s(n(y).showCurrency(n(t).payable_amount)),1)]),e("div",We,[e("div",Ge,s(o.$t("Have a coupon"))+"? ",1),e("div",He,[w(e("input",{type:"text","onUpdate:modelValue":_[0]||(_[0]=k=>a.value=k),class:A(["formInputCoupon pr-14 p-3",l.value?"text-green-500 pl-10":""]),placeholder:o.$t("Enter coupon code")},null,10,Fe),[[H,a.value]]),l.value?(u(),p("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:d},[f(n(ae),{class:"w-6 h-6 text-red-500"})])):(u(),p("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:x},[f(n(X),{class:"w-6 h-6 text-white"})])),e("span",Re,[l.value?(u(),Y(n(K),{key:0,class:"w-6 h-6 text-green-500"})):T("",!0)])])])]),e("button",{class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:M},s(o.$t("Place Order")),1),f(se)]))}},Ee=N(qe,[["__scopeId","data-v-3f2fe9cd"]]),Le={class:"main-container"},Je={class:"flex items-center gap-2 overflow-hidden pt-4"},Xe={class:"grow w-full overflow-hidden"},Ye={class:"space-x-1 text-slate-600 text-sm font-normal truncate"},Ke={class:"grid grid-cols-1 xl:grid-cols-3 my-3 gap-8"},Qe={class:"col-span-1 xl:col-span-2"},Ze={class:"flex gap-2 justify-between items-center"},et={class:"text-slate-950 text-lg sm:text-3xl font-medium leading-10"},tt={class:"text-primary-600 text-lg font-medium leading-normal tracking-tight"},st={key:0},ot={class:"mt-6"},at={class:"mb-1"},nt={class:"text-slate-950 text-xl font-medium leading-7"},lt={class:"text-slate-500 text-lg font-normal leading-7 tracking-tight"},rt=["placeholder"],it={class:"p-6 mt-4 bg-white rounded-2xl border border-slate-200"},dt={class:"text-slate-950 text-xl font-medium leading-7"},ct={class:"mt-4 flex flex-wrap gap-4"},ut={for:"cash",class:"flex items-center gap-4 xl:min-w-80"},mt={class:"text-slate-500 text-base font-normal leading-normal"},pt={for:"card",class:"flex items-center gap-4 xl:min-w-80"},ht={class:"text-slate-500 text-base font-normal leading-normal"},_t={key:0,class:"mt-5 border-t border-slate-200"},ft={class:"text-slate-600 pt-2 block text-md font-medium leading-7"},vt={class:"mt-3 flex flex-wrap gap-4"},yt=["for"],xt=["id","value"],gt={class:""},bt=["src"],wt={__name:"Checkout",setup(P){const v=O(),t=new W,y=B(),b=V(),r=g(!1),l=g(""),a=g("cash"),h=g(null),x=g(null);return G(()=>{window.scrollTo(0,0),b.coupon_code="",h.value=a.value,v.user||t.push({name:"home"}),v.showAddressModal=!1,v.showChangeAddressModal=!1}),D(a,()=>{a.value==="card"?h.value=x.value:h.value=a.value}),D(x,()=>{a.value==="card"&&(h.value=x.value)}),(d,i)=>{const M=Z("router-link");return u(),p("div",Le,[e("div",Je,[f(M,{to:"/",class:"w-6 h-6"},{default:z(()=>[f(n(ne),{class:"w-5 h-5 text-slate-600"})]),_:1}),e("div",Xe,[e("div",Ye,[e("span",null,s(d.$t("Home")),1),i[5]||(i[5]=e("span",null,"/",-1)),e("span",null,s(d.$t("Cart")),1),i[6]||(i[6]=e("span",null,"/",-1)),e("span",null,s(d.$t("Checkout")),1)])])]),e("div",Ke,[e("div",Qe,[e("div",{class:A(["py-4 border-b tran",r.value?"border-primary":"border-slate-200"])},[e("div",Ze,[e("div",et,s(d.$t("Checkout")),1),e("div",{class:"flex items-center gap-2 cursor-pointer",onClick:i[0]||(i[0]=c=>r.value=!r.value)},[e("div",tt," ("+s(n(b).checkoutTotalItems)+" "+s(d.$t("items"))+") ",1),f(n(ee),{class:A(["w-5 h-5 text-primary-600 transition duration-300",r.value?"rotate-180":""])},null,8,["class"])])]),r.value?(u(),p("div",st,[f(xe)])):T("",!0)],2),f(oe),e("div",ot,[e("div",at,[e("span",nt,s(d.$t("Note")),1),e("span",lt," ("+s(d.$t("Optional"))+") ",1)]),w(e("textarea",{"onUpdate:modelValue":i[1]||(i[1]=c=>l.value=c),rows:"3",class:"form-input",placeholder:d.$t("Write your note")+"..."},null,8,rt),[[H,l.value]])]),e("div",it,[e("div",dt,s(d.$t("Payment Method")),1),e("div",ct,[e("label",ut,[w(e("input",{"onUpdate:modelValue":i[2]||(i[2]=c=>a.value=c),id:"cash",name:"payment",type:"radio",class:"radioBtn2",value:"cash",checked:""},null,512),[[S,a.value]]),i[7]||(i[7]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/money-2.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",mt,s(d.$t("Cash on delivery")),1)]),e("label",pt,[w(e("input",{"onUpdate:modelValue":i[3]||(i[3]=c=>a.value=c),id:"card",name:"payment",type:"radio",class:"radioBtn2",value:"card"},null,512),[[S,a.value]]),i[8]||(i[8]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/card.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",ht,s(d.$t("Credit or Debit Card")),1)])]),f(te,{"leave-active-class":"transition ease-in duration-300","enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:z(()=>[a.value==="card"?(u(),p("div",_t,[e("span",ft,s(d.$t("Available Payment Gateways")),1),e("div",vt,[(u(!0),p(I,null,j(n(y).paymentGateways,c=>(u(),p("label",{key:c.id,for:c.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer"},[w(e("input",{"onUpdate:modelValue":i[4]||(i[4]=$=>x.value=$),id:c.name,name:"paymentGateway",type:"radio",class:"sr-only",value:c.name},null,8,xt),[[S,x.value]]),e("div",gt,[e("img",{src:c.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,bt)])],8,yt))),128))])])):T("",!0)]),_:1})])]),f(Ee,{note:l.value,paymentMethod:h.value},null,8,["note","paymentMethod"])])])}}},It=N(wt,[["__scopeId","data-v-68383325"]]);export{It as default};
