import{y as L,s as G,v as H,p as Q,J as U,e as W,o as r,c as i,a as e,n as d,t as s,l as V,b as c,u as l,L as X,K as Y,m as Z}from"./app-p80MXNvq.js";import{_ as tt}from"./Bag-DXuGUtPH.js";const et={class:"flex flex-col"},ot={class:"bg-white"},st=["src"],rt={key:0,class:"px-1 py-0.5 bg-red-500 rounded-2xl text-white text-xs font-medium absolute top-2 left-2"},it={class:"bg-white p-2 flex flex-col items-start gap-2 col-span-2"},at={class:"text-primary text-base font-bold leading-normal"},nt={key:0,class:"text-slate-400 text-sm font-normal line-through leading-tight"},dt={class:"flex justify-between items-center w-full"},lt={class:"text-slate-950 text-sm font-bold leading-tight"},ct={class:"text-slate-500 text-sm font-normal leading-tight"},ut={key:0,class:"text-right text-slate-500 text-sm font-normal leading-tight"},pt={key:1,class:"text-right text-red-500 text-sm font-normal leading-tight"},ft={class:"w-full p-2"},ht={key:0,class:"justify-start items-center gap-3 flex w-full"},mt={class:"w-5 h-5"},_t={class:"text-primary text-sm font-normal leading-tight"},vt={key:1,class:"justify-center items-center gap-0.5 flex border border-red-300 py-2.5 rounded-[10px] w-full",disabled:""},yt={class:"text-red-300 text-sm font-normal leading-tight"},wt={__name:"ProductCard",props:{product:Object},setup(E){var y,g;const p=L(),f=G(),u=H(),a=Q(),h=U(),t=E,I={is_buy_now:!1,product_id:(y=t.product)==null?void 0:y.id,quantity:1,size:null,color:null,unit:null},J=o=>{u.addToCart(I,o)},K=async()=>{var o,n;if(a.token===null)return a.loginModal=!0;await u.addToCart({product_id:(o=t.product)==null?void 0:o.id,is_buy_now:!0,quantity:1,size:null,color:null,unit:null},t.product),u.buyNowShopId=(n=t.product)==null?void 0:n.shop.id,p.push({name:"buynow"})},m=W((g=t.product)==null?void 0:g.is_favorite),_=()=>{if(a.token===null)return a.loginModal=!0;axios.post("/favorite-add-or-remove",{product_id:t.product.id},{headers:{Authorization:a.token}}).then(o=>{t.product.is_favorite=!t.product.is_favorite,m.value=o.data.data.product.is_favorite,m.value===!1?h.warning("Product removed from favorite",{position:"bottom-left"}):h.success("Product added to favorite",{position:"bottom-left"}),a.favoriteRemove=!0,a.fetchFavoriteProducts()})},v=()=>{t.product.quantity>0&&p.push({name:"productDetails",params:{id:t.product.id}})};return(o,n)=>{var x,b,w,k,C,q,j,$,S,B,N,z,P,D,F,O,T,A,M,R;return r(),i("div",{class:d(["rounded-lg border transition-all duration-300 group bg-white overflow-hidden relative",((x=t.product)==null?void 0:x.quantity)>0?"hover:border-primary":""])},[e("div",et,[e("div",ot,[e("div",{class:d(["w-full h-36 sm:h-52 overflow-hidden relative",((b=t.product)==null?void 0:b.quantity)>0?"":"opacity-30"])},[e("div",{class:"cursor-pointer",onClick:v},[e("img",{src:(w=t.product)==null?void 0:w.thumbnail,loading:"lazy",class:"w-full h-full group-hover:scale-110 transition duration-500 object-cover"},null,8,st)]),((k=t.product)==null?void 0:k.discount_percentage)>0?(r(),i("div",rt,s((C=t.product)==null?void 0:C.discount_percentage)+"% "+s(o.$t("OFF")),1)):V("",!0),(q=t.product)!=null&&q.is_favorite?(r(),i("button",{key:1,class:"absolute top-2 right-2 w-9 h-9 rounded-[10px] justify-center items-center flex cursor-pointer bg-white",onClick:_},[c(l(X),{class:"w-6 h-6 text-red-500"})])):(r(),i("button",{key:2,class:"absolute flex sm:hidden group-hover:flex top-2 right-2 w-9 h-9 rounded-[10px] justify-center items-center cursor-pointer bg-white transition-all duration-300",onClick:_},[c(l(Y),{class:"w-6 h-6 text-slate-600"})]))],2),e("div",{class:"cursor-pointer",onClick:v},[e("div",it,[e("div",{class:d(["text-slate-950 text-base font-normal leading-normal truncate w-full",((j=t.product)==null?void 0:j.quantity)>0?"":"opacity-30"])},s(($=t.product)==null?void 0:$.name),3),e("div",{class:d(["flex items-center gap-2",((S=t.product)==null?void 0:S.quantity)>0?"":"opacity-30"])},[e("div",at,s(l(f).showCurrency(((B=t.product)==null?void 0:B.discount_price)>0?(N=t.product)==null?void 0:N.discount_price:(z=t.product)==null?void 0:z.price)),1),((P=t.product)==null?void 0:P.discount_price)>0?(r(),i("div",nt,s(l(f).showCurrency((D=t.product)==null?void 0:D.price)),1)):V("",!0)],2),e("div",dt,[e("div",{class:d(["flex items-center gap-1",((F=t.product)==null?void 0:F.quantity)>0?"":"opacity-30"])},[c(l(Z),{class:"w-4 h-4 text-yellow-400"}),e("div",lt,s((O=t.product)==null?void 0:O.rating),1),e("div",ct," ("+s((T=t.product)==null?void 0:T.total_reviews)+") ",1)],2),n[1]||(n[1]=e("div",{class:"h-3 w-[0px] border border-slate-200"},null,-1)),((A=t.product)==null?void 0:A.quantity)>0?(r(),i("div",ut,s((M=t.product)==null?void 0:M.total_sold)+" "+s(o.$t("Sold")),1)):(r(),i("div",pt,s(o.$t("Stock Out")),1))])])])]),e("div",ft,[((R=t.product)==null?void 0:R.quantity)>0?(r(),i("div",ht,[e("button",{class:"cursor-pointer w-10 h-10 bg-white rounded-[10px] border border-primary-100 justify-center items-center flex",onClick:n[0]||(n[0]=gt=>J(t.product))},[e("div",mt,[c(tt)])]),e("button",{class:"justify-center items-center gap-0.5 flex border border-primary grow py-2.5 rounded-[10px]",onClick:K},[e("div",_t,s(o.$t("Buy Now")),1)])])):(r(),i("button",vt,[e("div",yt,s(o.$t("Buy Now")),1)]))])])],2)}}};export{wt as _};
